#!/usr/bin/env node

/**
 * Raspberry Pi: Allow Node.js programs the privilege to initiate bluetooth scans
 * without requiring root privileges.
 */

const {exec} = require('child_process');
exec(
  'sudo setcap cap_net_raw+eip $(eval readlink -f `which node`)',
  (err, stdout, stderr) => {
    if (err) {
      console.error(err);
      return;
    }

    // the *entire* stdout and stderr (buffered)
    console.log(`stdout: ${stdout}`);
    console.log(`stderr: ${stderr}`);
  }
);
